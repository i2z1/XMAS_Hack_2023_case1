[
  {
    "objectID": "clickhouse.html",
    "href": "clickhouse.html",
    "title": "Clickhouse магия",
    "section": "",
    "text": "А вот код!\nlibrary(RClickhouse)\n\ncon &lt;- DBI::dbConnect(RClickhouse::clickhouse(), host=\"localhost\",\n                      port = 9000,\n                      dbname = \"WIFI\",\n                      user = \"default\",\n                      password = \"useruser\", compression = \"lz4\")"
  },
  {
    "objectID": "clickhouse.html#подключение",
    "href": "clickhouse.html#подключение",
    "title": "Clickhouse магия",
    "section": "",
    "text": "А вот код!\nlibrary(RClickhouse)\n\ncon &lt;- DBI::dbConnect(RClickhouse::clickhouse(), host=\"localhost\",\n                      port = 9000,\n                      dbname = \"WIFI\",\n                      user = \"default\",\n                      password = \"useruser\", compression = \"lz4\")"
  },
  {
    "objectID": "clickhouse.html#данные",
    "href": "clickhouse.html#данные",
    "title": "Clickhouse магия",
    "section": "Данные",
    "text": "Данные\nУ нас много строк даже после очистки:\n\n\nА вот код!\nDBI::dbGetQuery(con, \"SELECT count(*)\n                             FROM mainlog\")\n\n\n    count()\n1 299965940\n\n\nПример данных\n\n\nА вот код!\nres &lt;- DBI::dbGetQuery(con, \"SELECT (*)\n                             FROM mainlog limit 10\")\nknitr::kable(res)\n\n\n\n\n\n\n\n\n\n\n\n\n\nguid\ntm\nrouter_mac\nuser_mac\nsignal\nrouter_id\n\n\n\n\nb7e87fd6-49e9-41a7-9645-4ae25f120138\n2023-01-01 03:00:00.000 +0300\n48:8F:5A:AE:A1:D9\n68:D7:9A:A2:74:60\n-73.0\n0648078a-9d45-4577-af14-12b49e8f017b\n\n\n014f1da1-e200-4fc5-869a-a695836a2fe5\n2023-01-01 03:00:00.000 +0300\n48:8F:5A:AE:A1:D9\n6C:5A:B0:A1:DB:8E\n-68.0\n0648078a-9d45-4577-af14-12b49e8f017b\n\n\n9d5dfa10-f9fd-4dae-ac86-c935381a02b4\n2023-01-01 03:00:00.000 +0300\nB8:69:F4:6B:FD:E9\n60:A4:B7:4D:89:37\n-75.0\n07190dec-be71-44a2-8d64-c24fb51ebc7b\n\n\n14ed8300-18f3-42e6-9a92-e458edc2fac9\n2023-01-01 03:00:00.000 +0300\nCC:2D:E0:82:B9:07\n80:2A:A8:76:08:1C\n-74.0\n8a823f01-771f-420e-8971-928cba314a24\n\n\n35a91e47-d8a2-4642-8002-a5298702f12e\n2023-01-01 03:00:00.000 +0300\nCC:2D:E0:82:B9:40\n38:17:66:10:29:3C\n-73.0\n3d9490f4-fb08-4c4c-80ec-ca744a6d9ab4\n\n\n63eb92c4-3f13-45bc-b055-421dd6787ce6\n2023-01-01 03:00:00.000 +0300\nCC:2D:E0:82:B9:40\nD0:37:45:C1:E1:1E\n-66.0\n3d9490f4-fb08-4c4c-80ec-ca744a6d9ab4\n\n\n63d60bf2-6cef-4d32-92ef-8dfba4c63a82\n2023-01-01 03:00:01.000 +0300\n48:8F:5A:AC:81:1D\n68:D7:9A:BE:E3:20\n-57.0\n8a734674-e451-4fe1-8b50-3b3b46e334a1\n\n\n1928f1cd-5aef-427e-ac19-5295441827bb\n2023-01-01 03:00:01.000 +0300\n48:8F:5A:AE:A1:D9\n00:1E:43:90:F8:65\n-68.0\n0648078a-9d45-4577-af14-12b49e8f017b\n\n\nda4c5fcb-3006-48ae-931c-28c911bd9179\n2023-01-01 03:00:01.000 +0300\nB8:69:F4:6B:FD:E9\n8E:41:A1:E8:8C:B6\n-74.0\n07190dec-be71-44a2-8d64-c24fb51ebc7b\n\n\n511284de-fa1b-42e6-b47f-2ee43079d2cc\n2023-01-01 03:00:02.000 +0300\n48:8F:5A:AE:A1:D9\n5A:1A:86:06:3C:F7\n-75.0\n0648078a-9d45-4577-af14-12b49e8f017b\n\n\n\n\n\n\nДобавим данных из роутеров\n\n\nА вот код!\nrouters_dist &lt;- readr::read_csv(\"https://storage.yandexcloud.net/roadgraph/marshruts_lengts.csv\")\n\n# rdst &lt;- routers_dist %&gt;% \n#   tidyr::separate_wider_delim(from, delim = \" \", names = c(\"lat1\", \"lon1\")) %&gt;% \n#   tidyr::separate_wider_delim(to, delim = \" \", names = c(\"lat2\", \"lon2\")) %&gt;% \n#   mutate(lat1 = round(lat1 %&gt;% as.numeric(),digits = 5))"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n\nА вот код!\n1 + 1\n\n\n[1] 2"
  },
  {
    "objectID": "routers.html",
    "href": "routers.html",
    "title": "Роутеры",
    "section": "",
    "text": "Размещение роутеров"
  },
  {
    "objectID": "routers.html#вычисление-расстояний-между-роутерами",
    "href": "routers.html#вычисление-расстояний-между-роутерами",
    "title": "Роутеры",
    "section": "Вычисление расстояний между роутерами",
    "text": "Вычисление расстояний между роутерами\nimport osmnx as ox\nimport networkx as nx\nimport csv\n\npoints = [(37.618886,54.204617),\n          (37.5826629190378,54.1688958982062),\n          (37.5931054621157,54.1854456631672),\n          (37.5726628595483,54.1691301221863),\n          (37.6230252453024,54.2347433816421),\n          (37.616479,54.191903),\n          (37.622509,54.2128),\n          (37.611688,54.195984),\n          (37.625018,54.218076),\n          (37.622566,54.189654),\n          (37.604794,54.18133),\n          (37.614096,54.193204),\n          (37.6286864157148,54.2276569624141),\n          (37.6245072514748,54.2333462654037),\n          (37.67935,54.219052),\n          (37.6182365086987,54.2413214831852),\n          (37.627888,54.191341),\n          (37.6119371506259,54.2491761841739),\n          (37.625265,54.190082),\n          (37.620844,54.2101),\n          (37.5855121948686,54.1714546891764),\n          (37.5799264475165,54.1666267574838),\n          (37.5754334510529,54.1718766491252),\n          (37.619014,54.191034),\n          (37.5946593824111,54.1646166190679),\n          (37.5974766750285,54.1839287967087),\n          (37.619966,54.208412),\n          (37.614644,54.200674),\n          (37.619182,54.205679)\n          ]\n\nwith open(\"marshruts_lengts.csv\",\"w\") as file:\n    writer = csv.writer(file)\n    writer.writerow((\"from\",\"to\",\"length\"))\n\n\nmode = 'drive'\noptimizer = 'length'\ncenter = (54.203918, 37.618391)  # меняем местами\ngraph = ox.graph_from_point(center, 20000, dist_type='network', simplify=True)\n\nfor i in range(0,len(points)):\n    for j in range(0,len(points)):\n        if i == j:\n            continue\n\n        orig_node = ox.distance.nearest_nodes(graph,points[i][0],points[i][1])\n\n        dest_node = ox.distance.nearest_nodes(graph, points[j][0],points[j][1])\n\n        shortest_route = nx.shortest_path(graph, orig_node,dest_node,\n                                          weight=optimizer)\n        length = nx.shortest_path_length(G=graph, source=orig_node, target=dest_node, weight='length')\n        newRow = [str(points[i][0]) + ' ' + str(points[i][1]),str(points[j][0]) + ' ' + str(points[j][1]),length]\n        with open(\"marshruts_lengts.csv\",\"a\") as file:\n            writer = csv.writer(file)\n            writer.writerow(newRow)"
  },
  {
    "objectID": "routers.html#результат",
    "href": "routers.html#результат",
    "title": "Роутеры",
    "section": "Результат",
    "text": "Результат\n\n\n\n\n\n\nДатасет\n\n\n\nhttps://storage.yandexcloud.net/roadgraph/marshruts_lengts.csv"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "DSFans_XMASHack",
    "section": "",
    "text": "Сайт проекта команды DSFans"
  },
  {
    "objectID": "data_preparation.html",
    "href": "data_preparation.html",
    "title": "Подготовка данных",
    "section": "",
    "text": "А вот код!\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(httr2)"
  },
  {
    "objectID": "data_preparation.html#подготовка-рабочего-окружения",
    "href": "data_preparation.html#подготовка-рабочего-окружения",
    "title": "Подготовка данных",
    "section": "",
    "text": "А вот код!\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(httr2)"
  },
  {
    "objectID": "data_preparation.html#импорт",
    "href": "data_preparation.html#импорт",
    "title": "Подготовка данных",
    "section": "Импорт",
    "text": "Импорт\n\n\nА вот код!\n#|eval: false \n\nrd_network &lt;- readr::read_csv2(\"https://storage.yandexcloud.net/roadgraph/road_network.csv\")\nglimpse(rd_network)\n\n\nRows: 349,753\nColumns: 6\n$ geom           &lt;chr&gt; \"LINESTRING (37.081866 54.504539,37.081866 54.50443,37.…\n$ from_vertex_id &lt;dbl&gt; 3652, 58925, 58925, 248317, 24102, 52561, 96152, 169402…\n$ to_vertex_id   &lt;dbl&gt; 3650, 69671, 69510, 248315, 24100, 52559, 96154, 169400…\n$ weight         &lt;dbl&gt; 1.784126e+16, 4.689159e+16, 6.011167e+16, 1.951298e+16,…\n$ was_one_way    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,…\n$ group_id       &lt;dbl&gt; 42993, NA, NA, NA, 41418, NA, NA, NA, NA, NA, NA, NA, N…\n\n\nРоутеры\n\n\nА вот код!\nrouters &lt;- readr::read_csv2(\"data/wifi_routers.csv\")\n\nrouters &lt;- routers %&gt;% \n  tidyr::separate_wider_delim(geom, delim = \" \", names=c(\"point\", \"lat\", \"lon\")) %&gt;% \n  mutate(lat = stringr::str_replace(lat, \"\\\\(\",\"\") %&gt;% as.numeric()) %&gt;% \n  mutate(lon = stringr::str_replace(lon, \"\\\\)\",\"\") %&gt;% as.numeric())\n\nrouters %&gt;% select(guid, lat, lon)\n\n\n# A tibble: 29 × 3\n   guid                                   lat   lon\n   &lt;chr&gt;                                &lt;dbl&gt; &lt;dbl&gt;\n 1 0648078a-9d45-4577-af14-12b49e8f017b  37.6  54.2\n 2 6422a0a5-2c2d-4610-bebc-91722ea37827  37.6  54.2\n 3 b17aefd3-8431-4054-a0b5-b0a26eeb9f14  37.6  54.2\n 4 92c1cc9e-cfa4-4ef0-91f0-c0a158f547e7  37.6  54.2\n 5 f0058c02-034f-429a-b932-8638089d8718  37.6  54.2\n 6 37cea6a6-eaaa-4e12-9b4b-b444163a2cc8  37.6  54.2\n 7 07190dec-be71-44a2-8d64-c24fb51ebc7b  37.6  54.2\n 8 8a823f01-771f-420e-8971-928cba314a24  37.6  54.2\n 9 8a734674-e451-4fe1-8b50-3b3b46e334a1  37.6  54.2\n10 cdcab165-cc3a-460f-ae99-024216190ab1  37.6  54.2\n# ℹ 19 more rows\n\n\n\nРасстояния\n\n\nА вот код!\n#|eval: false\nlibrary(httr2)\n\nhttr2::request(\"https://graphhopper.com/api/1/route\") %&gt;% \n  req_method(\"POST\")"
  }
]